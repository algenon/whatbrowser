{"version":3,"sources":["whatbrowser.es6"],"names":[],"mappings":"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","file":"whatbrowser.js","sourcesContent":["/*\n * 'What is my browser' object.\n * Contains everything known about the browser,\n * plus optional geolocation.\n */\n(function init ($, UAParser, swfobject, deployJava) {\n  const navigator = window.navigator\n  const document = window.document\n\n  function resolutionToStr (width, height) {\n    return `${width} × ${height} px`\n  }\n\n  function browserSize (source) {\n    const value = source && source.browser_size || {\n      height: $(window).height(),\n      width: $(window).width()\n    }\n    value.toString =\n      () => resolutionToStr(value.width, value.height)\n    return value\n  }\n\n  function cookies (source) {\n    function hasCookies () {\n      if (navigator.cookieEnabled) {\n        return true\n      }\n      // create and delete cookie\n      document.cookie = 'cookietest=1'\n      const ret = document.cookie.indexOf('cookietest=') !== -1\n      document.cookie = 'cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT'\n      return ret\n    }\n\n    return source && source.cookies || hasCookies()\n  }\n\n  function flash (source) {\n    function hasFlash () {\n      try {\n        const fo = window.ActiveXObject &&\n          new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash') || null\n        if (fo) {\n          return true\n        }\n      } catch (e) {\n        if (navigator.mimeTypes &&\n          navigator.mimeTypes['application/x-shockwave-flash'] !== undefined &&\n          navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin) {\n          return true\n        }\n      }\n      return false\n    }\n\n    function flashToString (f) {\n      let str = ''\n      if (f.enabled && f.version) {\n        str = `${f.version.major}.${f.version.minor}.${f.version.release}`\n      } else if (f.enabled) {\n        str = 'да'\n      } else {\n        str = 'нет'\n      }\n      return str\n    }\n\n    const value = source && source.flash || {\n      enabled: hasFlash(),\n      version: swfobject && swfobject.getFlashPlayerVersion()\n    }\n    value.toString = () => flashToString(value)\n    return value\n  }\n\n  function javafn (source) {\n    const value = source && source.java || {\n      enabled: navigator.javaEnabled && navigator.javaEnabled(),\n      version: deployJava && deployJava.getJREs().shift()\n    }\n    value.toString = () => {\n      return value.enabled ? value.version || 'да' : 'нет'\n    }\n    return value\n  }\n\n  function language (source) {\n    return source && source.language ||\n      navigator.language || navigator.userLanguage\n  }\n\n  function online (source) {\n    return source && source.online || navigator.onLine\n  }\n\n  function screenfn (source) {\n    const value = source && source.screen ||\n      window.screen && {\n        color_depth: window.screen.colorDepth,\n        pixel_ratio: window.devicePixelRatio,\n        height: window.screen.height,\n        width: window.screen.width\n      }\n    value.toString = () => {\n      let str = ''\n      if (value) {\n        const resolution = resolutionToStr(value.width, value.height)\n        const depth = `${value.color_depth} bit`\n        str = `${resolution}, ${depth}`\n        if (value.pixel_ratio && value.pixel_ratio > 1) {\n          const retinaResolution = resolutionToStr(value.width * value.pixel_ratio,\n            value.height * value.pixel_ratio)\n          str += ` (retina ${retinaResolution})`\n        }\n      }\n      return str\n    }\n    return value\n  }\n\n  function ua (source) {\n    function browserToString (browser) {\n      let str = browser.name || ''\n      str += browser.major && ` ${browser.major}` || ''\n      str += browser.version && ` (${browser.version})` || ''\n      return str\n    }\n\n    function deviceToString (device) {\n      let str = device.vendor || ''\n      str += device.model && ` ${device.model}` || ''\n      str += device.type && ` (${device.type})` || ''\n      return str\n    }\n\n    function engineToString (engine) {\n      let str = engine.name || ''\n      str += engine.version && ` ${engine.version}` || ''\n      return str\n    }\n\n    function osToString (os) {\n      let str = os.name || ''\n      str += os.version && ` ${os.version}` || ''\n      return str\n    }\n\n    let value = {}\n    if (UAParser) {\n      value = source && source.ua || (new UAParser()).getResult()\n      value.toString = () => value.ua\n      value.browser.toString = () => browserToString(value.browser)\n      value.device.toString = () => deviceToString(value.device)\n      value.engine.toString = () => engineToString(value.engine)\n      value.os.toString = () => osToString(value.os)\n    } else {\n      value = {\n        ua: navigator.userAgent\n      }\n    }\n    return value\n  }\n\n  function geo (source) {\n    function positionToString (position) {\n      return position.latitude ? `${position.latitude}, ${position.longitude}` : ''\n    }\n\n    function addressToString (address) {\n      let str = address.country || ''\n      str += address.region && `', ${address.region}` || ''\n      str += address.city && `', ${address.city}` || ''\n      return str\n    }\n\n    const value = source\n    if (value && value.position) {\n      value.position.toString = () => positionToString(value.position)\n    }\n    if (value && value.address) {\n      value.address.toString = () => addressToString(value.address)\n    }\n    return value\n  }\n\n  function WhatBrowser (source) {\n    const self = this\n    self.browser_size = browserSize(source)\n    self.cookies = cookies(source)\n    self.flash = flash(source)\n    self.javafn = javafn(source)\n    self.language = language(source)\n    self.online = online(source)\n    self.screenfn = screenfn(source)\n    self.ua = ua(source)\n    self.geo = geo(source && source.geo || undefined)\n  }\n\n  WhatBrowser.create = function (options = {}) {\n    const whatbrowser = new WhatBrowser()\n    const promise = $.Deferred()\n    const onGeolocate = (location) => {\n      whatbrowser.geo = geo(location)\n      promise.resolve(whatbrowser)\n    }\n    if (options.geo) {\n      // geolocate().always(onGeolocate)\n      promise.resolve(whatbrowser)\n    } else {\n      promise.resolve(whatbrowser)\n    }\n    return promise\n  }\n\n  window.WhatBrowser = WhatBrowser\n  return WhatBrowser\n}(window.jQuery, window.UAParser, window.swfobject, window.deployJava))\n"]}